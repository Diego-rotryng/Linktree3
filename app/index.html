<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mini Página — Dark</title>
<style>
:root{--bg:#0b0b0c;--card:#141416;--ink:#f5f7fb;--muted:#b6bfd3;--brand:#a3e635}
*{box-sizing:border-box}
body{margin:0;background:radial-gradient(900px 700px at 15% -15%,#141b31 0,#0b0b0c 60%);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.wrap{max-width:800px;margin:24px auto;padding:0 18px}
.card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:16px;margin-bottom:14px}
.row{display:flex;gap:12px;align-items:center}
.avatar{width:56px;height:56px;border-radius:12px;background:#0d0f17;object-fit:cover;border:1px solid rgba(255,255,255,.1)}
h1{font-size:28px;margin:0 0 4px 0}
.small{color:var(--muted);margin:0}
.btn{display:inline-flex;align-items:center;gap:.6rem;background:var(--brand);color:#071205;border:1px solid #7fb21d;border-radius:12px;padding:.7rem 1rem;font-weight:800;text-decoration:none}
.badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.badge{background:#0e1325;border:1px solid #2b355f;color:#d8e2ff;padding:.25rem .6rem;border-radius:999px;font-size:.8rem}
.links a{display:block;color:#dbe6ff;text-decoration:none;padding:.6rem 0;border-bottom:1px solid rgba(255,255,255,.06)}
.section-title{color:#cfe2ff;margin:12px 0 6px 0}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.promo{background:#0f162c;border:1px solid #27325e;border-radius:12px;padding:10px}
.t{font-weight:700}
footer a{color:#dbe6ff;text-decoration:none;margin-right:10px}
.icon{width:20px;height:20px;vertical-align:-4px}
.hide{display:none}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="row">
      <img id="avatar" class="avatar" alt="avatar"/>
      <div style="flex:1">
        <h1 id="name">Nombre del Profesional / Comercio</h1>
        <p id="tagline" class="small">Propuesta de valor en 1 línea</p>
      </div>
      <a id="ctaWA" class="btn" target="_blank" rel="noopener">Agendá por WhatsApp</a>
    </div>
    <div id="badges" class="badges"></div>
  </div>

  <div id="promosSec" class="card hide">
    <div class="section-title">Promociones</div>
    <div id="promos" class="grid2"></div>
  </div>

  <div id="linksSec" class="card hide">
    <div class="section-title">Acciones</div>
    <div class="links" id="links"></div>
  </div>

  <div id="testiSec" class="card hide">
    <div class="section-title">Testimonios</div>
    <div id="testis" class="links"></div>
  </div>

  <div class="card">
    <div class="row">
      <div style="flex:1">
        <div id="address" class="small"></div>
      </div>
      <div id="social" class="row"></div>
    </div>
  </div>
</div>

<script>
const ICONS={
  instagram:'<svg class="icon" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.6"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.6"/><circle cx="17" cy="7" r="1.3" fill="currentColor"/></svg>',
  facebook:'<svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M14 9h3V6h-3c-1.7 0-3 1.3-3 3v2H8v3h3v7h3v-7h2.6l.4-3H14V9z"/></svg>',
  tiktok:'<svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M20 8.5c-2 0-4-1.5-4.5-3.5h-2.5v9a3 3 0 1 1-3-3c.2 0 .5 0 .7.1V9.3A6 6 0 1 0 15 15V8.7c1 1 2.5 1.8 4 1.8V8.5z"/></svg>',
  linkedin:'<svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M6.94 6.5A2.19 2.19 0 1 1 4.75 4.3a2.19 2.19 0 0 1 2.19 2.2zM6.9 8.7H3.5V20h3.4V8.7zm5.5 0H9v11.3h3.4v-6.1c0-1.6.3-3.1 2.3-3.1 2 0 2 1.8 2 3.2V20H20v-6.8c0-3.3-.7-5.8-4.5-5.8-1.8 0-3 .9-3.6 1.9h-.1V8.7z"/></svg>',
  youtube:'<svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M22 12s0-3-.4-4.4c-.2-.8-.8-1.4-1.6-1.6C18.6 5.5 12 5.5 12 5.5s-6.6 0-8 .5c-.8.2-1.4.8-1.6 1.6C2 9 2 12 2 12s0 3 .4 4.4c.2.8.8 1.4 1.6 1.6 1.4.5 8 .5 8 .5s6.6 0 8-.5c.8-.2 1.4-.8 1.6-1.6.4-1.4.4-4.4.4-4.4zM10 15.5v-7l6 3.5-6 3.5z"/></svg>',
  spotify:'<svg class="icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm4.4 14.7c-.2.3-.6.3-.9.1-2.4-1.5-5.4-1.9-9-.9-.3.1-.7-.1-.8-.4-.1-.3.1-.7.4-.8 3.9-1.1 7.3-.7 10 .9.3.2.4.6.3.9zm1.2-2.8c-.2.3-.6.4-.9.2-2.8-1.7-7.1-2.2-10.4-1-.3.1-.7-.1-.8-.4-.1-.3.1-.7.4-.8 3.8-1.3 8.6-.7 11.8 1.2.3.2.4.6.2.8zm.1-2.9c-3.3-2-8.9-2.2-12.1-1.1-.4.1-.8-.1-.9-.5-.1-.4.1-.8.5-.9 3.7-1.2 9.9-1 13.6 1.2.4.2.5.6.3.9-.2.3-.6.4-1 .4z"/></svg>',
  maps:'<svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 2C8 2 5 5 5 9c0 5 7 13 7 13s7-8 7-13c0-4-3-7-7-7Z" stroke="currentColor" stroke-width="1.4"/><circle cx="12" cy="9" r="2.5" stroke="currentColor" stroke-width="1.4"/></svg>'
};
function qsel(s, r=document){ return r.querySelector(s); }
function getParam(name){ const u=new URL(location.href); return u.searchParams.get(name); }
async function loadConfig(){
  const cfgURL = getParam('config');
  if(cfgURL){
    try{ const res = await fetch(cfgURL); if(res.ok){ return await res.json(); } }catch(e){}
  }
  try{
    const res = await fetch('../clients/barberia-demo.json');
    if(res.ok) return await res.json();
  }catch(e){}
  return {};
}
function a(el, attrs){ const e=document.createElement(el); Object.entries(attrs||{}).forEach(([k,v])=>{ if(k==='text') e.textContent=v; else if(k==='html') e.innerHTML=v; else e.setAttribute(k,v);}); return e; }
function render(cfg){
  qsel('#avatar').src = cfg.brand?.avatar || 'https://placehold.co/96x96/png';
  qsel('#name').textContent = cfg.brand?.name || 'Tu nombre';
  qsel('#tagline').textContent = cfg.brand?.tagline || 'Propuesta de valor en 1 línea';
  const wa = cfg.cta?.wa ? `https://wa.me/${cfg.cta.wa}?text=${encodeURIComponent(cfg.cta.wa_text||'Hola!')}` : '#';
  const cta = qsel('#ctaWA'); cta.href = wa;
  const badges = qsel('#badges'); badges.innerHTML='';
  (cfg.brand?.tags||[]).forEach(t=> badges.append(a('span',{class:'badge',text:t})));
  const promos = cfg.promotions||[];
  const promosSec = qsel('#promosSec'), promosWrap=qsel('#promos');
  promosWrap.innerHTML='';
  if(promos.length){ promosSec.classList.remove('hide'); promos.forEach(p=>{
    const box=a('div',{class:'promo'});
    box.innerHTML = `<div class="t">${p.title||''}</div><div class="small">${p.desc||''}</div><div class="small">${p.price||''}</div>`;
    if(p.link) box.append(a('div',{}), a('a',{class:'btn',href:p.link,target:'_blank',rel:'noopener',text:'Lo quiero'}));
    promosWrap.append(box);
  });}
  const links = qsel('#links'); links.innerHTML=''; let any=false;
  if(cfg.cta?.calendar){ links.append(a('a',{href:cfg.cta.calendar,target:'_blank',rel:'noopener',text:'Reservar turno'})); any=true; }
  if(cfg.cta?.pay){ links.append(a('a',{href:cfg.cta.pay,target:'_blank',rel:'noopener',text:'Pagar online'})); any=true; }
  if(any) qsel('#linksSec').classList.remove('hide');
  const testis = cfg.testimonials||[]; const list=qsel('#testis'); list.innerHTML='';
  if(testis.length){ qsel('#testiSec').classList.remove('hide'); testis.forEach(t=> list.append(a('div',{text:`“${t.text}” — ${t.author||''}`}))); }
  qsel('#address').textContent = cfg.footer?.address || '';
  const soc = qsel('#social'); soc.innerHTML='';
  if(cfg.footer?.maps) soc.append(a('a',{href:cfg.footer.maps,target:'_blank',rel:'noopener',html:ICONS.maps}));
  const socialMap=['instagram','facebook','tiktok','linkedin','youtube','spotify'];
  (socialMap).forEach(k=>{ const v=cfg.social?.[k]; if(v){ soc.append(a('a',{href:v,target:'_blank',rel:'noopener',html:ICONS[k]})); }});
}
loadConfig().then(render);
</script>
</body>
</html>
